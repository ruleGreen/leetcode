class Solution:
    def productExceptSelf(self, nums: List[int]) -> List[int]:
        if len(nums) == 0:
            return []
        
        product = 1
        for i in range(len(nums)):
            product *= nums[i]
        
        output = [_ for _ in range(len(nums))]
        for i in range(len(output)):
            if nums[i] != 0:
                output[i] = product // nums[i]
            if nums[i] == 0:
                res = self.calculate(nums, i)
                output[i] = res
            
        return output
    
    def calculate(self, nums, index):
        if index < 0 or index > len(nums):
            return
        product = 1
        
        for i in range(len(nums)):
            if i != index:
                product *= nums[i]
        
        return product
